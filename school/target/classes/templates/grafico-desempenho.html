<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Desempenho dos Alunos</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>

<div class="container">
    <h1>Distribui√ß√£o de Desempenho dos Alunos</h1>

    <!-- üîπ Sele√ß√£o de Mat√©ria -->
    <form method="get" action="/graficos/desempenho">
        <label for="materia">Escolha a Mat√©ria:</label>
        <select id="materia" name="materia" onchange="this.form.submit()">
            <option value="">Selecione uma mat√©ria</option>
            <option th:each="materia : ${materias}" th:value="${materia}" th:text="${materia}"
                    th:selected="${materia == materiaSelecionada}"></option>
        </select>
    </form>

    <!-- üîπ Exibir Mensagem Caso N√£o Tenha Notas -->
    <th:block th:if="${mediasPorAluno.isEmpty()}">
        <p class="info-message">Nenhum aluno encontrado para essa mat√©ria.</p>
    </th:block>

    <!-- üîπ Tabela de Notas com M√©dia e Letra -->
    <div class="table-container">
        <table class="table">
            <thead>
            <tr>
                <th>Aluno</th>
                <th>M√©dia das Notas</th>
                <th>Classifica√ß√£o</th> <!-- Letra da Nota -->
            </tr>
            </thead>
            <tbody>
            <tr th:each="entry : ${mediasPorAluno}">
                <td th:text="${entry.key}"></td> <!-- Nome do Aluno -->
                <td th:text="${#numbers.formatDecimal(entry.value, 1, 2)}"></td> <!-- M√©dia -->
                <td th:text="${@notaUtils.converterParaLetra(entry.value)}"></td> <!-- Letra da Nota -->
            </tr>
            </tbody>
        </table>
    </div>

    <div class="button-group">
        <a href="/"><button class="btn-secondary">Voltar</button></a>
    </div>
</div>

</body>
</html>
